var snowStorm=function(e,t){function i(e,t){return isNaN(t)&&(t=0),Math.random()*e+t}function s(){e.setTimeout(function(){o.start(!0)},20),o.events.remove(a?t:e,"mousemove",s)}function n(){o.excludeMobile&&f||s(),o.events.remove(e,"load",n)}this.autoStart=!0,this.excludeMobile=!0,this.flakesMax=128,this.flakesMaxActive=64,this.animationInterval=33,this.useGPU=!0,this.className=null,this.excludeMobile=!0,this.flakeBottom=null,this.followMouse=!0,this.snowColor="#fff",this.snowCharacter="&bull;",this.snowStick=!0,this.targetElement=null,this.useMeltEffect=!0,this.useTwinkleEffect=!1,this.usePositionFixed=!1,this.usePixelPosition=!1,this.freezeOnBlur=!0,this.flakeLeftOffset=0,this.flakeRightOffset=0,this.flakeWidth=8,this.flakeHeight=8,this.vMaxX=5,this.vMaxY=4,this.zIndex=0;var l,o=this,a=navigator.userAgent.match(/msie/i),r=navigator.userAgent.match(/msie 6/i),f=navigator.userAgent.match(/mobile|opera m(ob|in)/i),m=a&&"BackCompat"===t.compatMode||r,h=null,u=null,c=null,d=null,v=null,p=null,y=null,k=1,g=!1,x=!1,w=function(){try{t.createElement("div").style.opacity="0.5"}catch(e){return!1}return!0}(),F=!1,b=t.createDocumentFragment();return l=function(){function i(e){return void 0!==l.style[e]?e:null}var s,n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/(o.animationInterval||20))};s=n?function(){return n.apply(e,arguments)}:null;var l;l=t.createElement("div");var a={transform:{ie:i("-ms-transform"),moz:i("MozTransform"),opera:i("OTransform"),webkit:i("webkitTransform"),w3:i("transform"),prop:null},getAnimationFrame:s};return a.transform.prop=a.transform.w3||a.transform.moz||a.transform.webkit||a.transform.ie||a.transform.opera,l=null,a}(),this.timer=null,this.flakes=[],this.disabled=!1,this.active=!1,this.meltFrameCount=20,this.meltFrames=[],this.setXY=function(e,t,i){if(!e)return!1;o.usePixelPosition||x?(e.style.left=t-o.flakeWidth+"px",e.style.top=i-o.flakeHeight+"px"):m?(e.style.right=100-t/h*100+"%",e.style.top=Math.min(i,v-o.flakeHeight)+"px"):o.flakeBottom?(e.style.right=100-t/h*100+"%",e.style.top=Math.min(i,v-o.flakeHeight)+"px"):(e.style.right=100-t/h*100+"%",e.style.bottom=100-i/c*100+"%")},this.events=function(){function t(e){var t=n.call(e),i=t.length;return s?(t[1]="on"+t[1],i>3&&t.pop()):3===i&&t.push(!1),t}function i(e,t){var i=e.shift(),n=[l[t]];s?i[n](e[0],e[1]):i[n].apply(i,e)}var s=!e.addEventListener&&e.attachEvent,n=Array.prototype.slice,l={add:s?"attachEvent":"addEventListener",remove:s?"detachEvent":"removeEventListener"};return{add:function(){i(t(arguments),"add")},remove:function(){i(t(arguments),"remove")}}}(),this.randomizeWind=function(){var e;if(p=function(e){return 1===parseInt(i(2),10)?-1*e:e}(i(o.vMaxX,.2)),y=i(o.vMaxY,.2),this.flakes)for(e=0;e<this.flakes.length;e++)this.flakes[e].active&&this.flakes[e].setVelocities()},this.scrollHandler=function(){var i;if(d=o.flakeBottom?0:parseInt(e.scrollY||t.documentElement.scrollTop||(m?t.body.scrollTop:0),10),isNaN(d)&&(d=0),!g&&!o.flakeBottom&&o.flakes)for(i=0;i<o.flakes.length;i++)0===o.flakes[i].active&&o.flakes[i].stick()},this.resizeHandler=function(){e.innerWidth||e.innerHeight?(h=e.innerWidth-16-o.flakeRightOffset,c=o.flakeBottom||e.innerHeight):(h=(t.documentElement.clientWidth||t.body.clientWidth||t.body.scrollWidth)-(a?0:8)-o.flakeRightOffset,c=o.flakeBottom||t.documentElement.clientHeight||t.body.clientHeight||t.body.scrollHeight),v=t.body.offsetHeight,u=parseInt(h/2,10)},this.resizeHandlerAlt=function(){h=o.targetElement.offsetWidth-o.flakeRightOffset,c=o.flakeBottom||o.targetElement.offsetHeight,u=parseInt(h/2,10),v=t.body.offsetHeight},this.freeze=function(){if(o.disabled)return!1;o.disabled=1,o.timer=null},this.resume=function(){if(!o.disabled)return!1;o.disabled=0,o.timerInit()},this.toggleSnow=function(){o.flakes.length?(o.active=!o.active,o.active?(o.show(),o.resume()):(o.stop(),o.freeze())):o.start()},this.stop=function(){var i;for(this.freeze(),i=0;i<this.flakes.length;i++)this.flakes[i].o.style.display="none";o.events.remove(e,"scroll",o.scrollHandler),o.events.remove(e,"resize",o.resizeHandler),o.freezeOnBlur&&(a?(o.events.remove(t,"focusout",o.freeze),o.events.remove(t,"focusin",o.resume)):(o.events.remove(e,"blur",o.freeze),o.events.remove(e,"focus",o.resume)))},this.show=function(){var e;for(e=0;e<this.flakes.length;e++)this.flakes[e].o.style.display="block"},this.SnowFlake=function(e,s,n){var a=this;this.type=e,this.x=s||parseInt(i(h-20),10),this.y=isNaN(n)?-i(c)-12:n,this.vX=null,this.vY=null,this.vAmpTypes=[1,1.2,1.4,1.6,1.8],this.vAmp=this.vAmpTypes[this.type]||1,this.melting=!1,this.meltFrameCount=o.meltFrameCount,this.meltFrames=o.meltFrames,this.meltFrame=0,this.twinkleFrame=0,this.active=1,this.fontSize=10+this.type/5*10,this.o=t.createElement("div"),this.o.innerHTML=o.snowCharacter,o.className&&this.o.setAttribute("class",o.className),this.o.style.color=o.snowColor,this.o.style.position=g?"fixed":"absolute",o.useGPU&&l.transform.prop&&(this.o.style[l.transform.prop]="translate3d(0px, 0px, 0px)"),this.o.style.width=o.flakeWidth+"px",this.o.style.height=o.flakeHeight+"px",this.o.style.fontFamily="arial,verdana",this.o.style.cursor="default",this.o.style.overflow="hidden",this.o.style.fontWeight="normal",this.o.style.zIndex=o.zIndex,b.appendChild(this.o),this.refresh=function(){if(isNaN(a.x)||isNaN(a.y))return!1;o.setXY(a.o,a.x,a.y)},this.stick=function(){m||o.targetElement!==t.documentElement&&o.targetElement!==t.body?a.o.style.top=c+d-o.flakeHeight+"px":o.flakeBottom?a.o.style.top=o.flakeBottom+"px":(a.o.style.display="none",a.o.style.bottom="0%",a.o.style.position="fixed",a.o.style.display="block")},this.vCheck=function(){a.vX>=0&&a.vX<.2?a.vX=.2:a.vX<0&&a.vX>-.2&&(a.vX=-.2),a.vY>=0&&a.vY<.2&&(a.vY=.2)},this.move=function(){var e=a.vX*k;a.x+=e,a.y+=a.vY*a.vAmp,a.x>=h||h-a.x<o.flakeWidth?a.x=0:e<0&&a.x-o.flakeLeftOffset<-o.flakeWidth&&(a.x=h-o.flakeWidth-1),a.refresh(),c+d-a.y+o.flakeHeight<o.flakeHeight?(a.active=0,o.snowStick?a.stick():a.recycle()):(o.useMeltEffect&&a.active&&a.type<3&&!a.melting&&Math.random()>.998&&(a.melting=!0,a.melt()),o.useTwinkleEffect&&(a.twinkleFrame<0?Math.random()>.97&&(a.twinkleFrame=parseInt(8*Math.random(),10)):(a.twinkleFrame--,w?a.o.style.opacity=a.twinkleFrame&&a.twinkleFrame%2==0?0:1:a.o.style.visibility=a.twinkleFrame&&a.twinkleFrame%2==0?"hidden":"visible")))},this.animate=function(){a.move()},this.setVelocities=function(){a.vX=p+i(.12*o.vMaxX,.1),a.vY=y+i(.12*o.vMaxY,.1)},this.setOpacity=function(e,t){if(!w)return!1;e.style.opacity=t},this.melt=function(){o.useMeltEffect&&a.melting&&a.meltFrame<a.meltFrameCount?(a.setOpacity(a.o,a.meltFrames[a.meltFrame]),a.o.style.fontSize=a.fontSize-a.fontSize*(a.meltFrame/a.meltFrameCount)+"px",a.o.style.lineHeight=o.flakeHeight+2+.75*o.flakeHeight*(a.meltFrame/a.meltFrameCount)+"px",a.meltFrame++):a.recycle()},this.recycle=function(){a.o.style.display="none",a.o.style.position=g?"fixed":"absolute",a.o.style.bottom="auto",a.setVelocities(),a.vCheck(),a.meltFrame=0,a.melting=!1,a.setOpacity(a.o,1),a.o.style.padding="0px",a.o.style.margin="0px",a.o.style.fontSize=a.fontSize+"px",a.o.style.lineHeight=o.flakeHeight+2+"px",a.o.style.textAlign="center",a.o.style.verticalAlign="baseline",a.x=parseInt(i(h-o.flakeWidth-20),10),a.y=parseInt(-1*i(c),10)-o.flakeHeight,a.refresh(),a.o.style.display="block",a.active=1},this.recycle(),this.refresh()},this.snow=function(){var e,t,s=0,n=null;for(e=0,t=o.flakes.length;e<t;e++)1===o.flakes[e].active&&(o.flakes[e].move(),s++),o.flakes[e].melting&&o.flakes[e].melt();s<o.flakesMaxActive&&0===(n=o.flakes[parseInt(i(o.flakes.length),10)]).active&&(n.melting=!0),o.timer&&l.getAnimationFrame(o.snow)},this.mouseMove=function(e){if(!o.followMouse)return!0;var t=parseInt(e.clientX,10);k=t<u?t/u*2-2:(t-=u)/u*2},this.createSnow=function(e,t){var s;for(s=0;s<e;s++)o.flakes[o.flakes.length]=new o.SnowFlake(parseInt(i(6),10)),(t||s>o.flakesMaxActive)&&(o.flakes[o.flakes.length-1].active=-1);o.targetElement.appendChild(b)},this.timerInit=function(){o.timer=!0,o.snow()},this.init=function(){var i;for(i=0;i<o.meltFrameCount;i++)o.meltFrames.push(1-i/o.meltFrameCount);o.randomizeWind(),o.createSnow(o.flakesMax),o.events.add(e,"resize",o.resizeHandler),o.events.add(e,"scroll",o.scrollHandler),o.freezeOnBlur&&(a?(o.events.add(t,"focusout",o.freeze),o.events.add(t,"focusin",o.resume)):(o.events.add(e,"blur",o.freeze),o.events.add(e,"focus",o.resume))),o.resizeHandler(),o.scrollHandler(),o.followMouse&&o.events.add(a?t:e,"mousemove",o.mouseMove),o.animationInterval=Math.max(20,o.animationInterval),o.timerInit()},this.start=function(i){if(F){if(i)return!0}else F=!0;if("string"==typeof o.targetElement){var s=o.targetElement;if(o.targetElement=t.getElementById(s),!o.targetElement)throw new Error('Snowstorm: Unable to get targetElement "'+s+'"')}if(o.targetElement||(o.targetElement=t.body||t.documentElement),o.targetElement!==t.documentElement&&o.targetElement!==t.body&&(o.resizeHandler=o.resizeHandlerAlt,o.usePixelPosition=!0),o.resizeHandler(),o.usePositionFixed=o.usePositionFixed&&!m&&!o.flakeBottom,e.getComputedStyle)try{x="relative"===e.getComputedStyle(o.targetElement,null).getPropertyValue("position")}catch(e){x=!1}g=o.usePositionFixed,h&&c&&!o.disabled&&(o.init(),o.active=!0)},o.autoStart&&o.events.add(e,"load",n,!1),this}(window,document);